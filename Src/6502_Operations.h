#include "stdafx.h"

//=================================================================================================
//
// Operations
//
//=================================================================================================
inline u8& reg_cpuX()
{
	return cpu.X;
}
//-------------------------------------------------------------------------------------------------
inline u8& reg_cpuY()
{
	return cpu.Y;
}
//-------------------------------------------------------------------------------------------------
inline u8& reg_cpuA()
{
	return cpu.A;
}
//-------------------------------------------------------------------------------------------------
inline u16& reg_cpuPC()
{
	return cpu.PC;
}
//=================================================================================================
inline u8 op_ADC(u8 val)
{
	u16 newA = cpu.A;
	newA += val;
	newA += cpu.GetFlag(flag_C);
	cpu.SetFlag(flag_C, (newA&0x100)?1:0);
	cpu.SetFlag(flag_V,(newA^cpu.A)&(val^newA)&0x80); // from http://www.righto.com/2012/12/the-6502-overflow-flag-explained.html
	cpu.A = newA & 0xff;
	cpu.SetZN(cpu.A);
	return cpu.A;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_AND(u8 val)
{
	cpu.A &= val;
	cpu.SetZN(cpu.A);
	return cpu.A;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_ASL(u8 val)
{
	cpu.SetFlag(flag_C, (val & 0x80));
	val <<= 1;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_BCC(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BCS(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BEQ(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BIT(u8 val)
{
	cpu.SetFlag(flag_Z,cpu.A&val);
	cpu.SetFlag(flag_V, (val & 0x40));
	cpu.SetFlag(flag_N, (val & 0x80));
	return 0;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_BMI(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BNE(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BPL(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BRK(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BVC(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_BVS(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CLC(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CLD(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CLI(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CLV(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CMP(u8 val)
{
	cpu.SetFlag(flag_C,cpu.A>val);
	cpu.SetFlag(flag_Z,cpu.A==val);
	cpu.SetFlag(flag_N,val>cpu.A);
	return 0;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_CPX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_CPY(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_DEC(u8 val)
{
	val--;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_DEX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_DEY(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_EOR(u8 val)
{
	cpu.A ^= val;
	cpu.SetZN(cpu.A);
	return cpu.A;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_INC(u8 val)
{
	val ++;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_INX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_INY(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_JMP(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_JSR(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_LDA(u8 val)
{
	cpu.A = val;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_LDX(u8 val)
{
	cpu.X = val;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_LDY(u8 val)
{
	cpu.Y = val;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_LSR(u8 val)
{
	cpu.SetFlag(flag_C, (val & 0x1));
	val >>= 1;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_NOP(u8 val)
{
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_ORA(u8 val)
{
	cpu.A |= val;
	cpu.SetZN(cpu.A);
	return cpu.A;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_PHA(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_PHP(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_PLA(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_PLP(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_ROL(u8 val)
{
	u8 C = cpu.GetFlag(flag_C);
	cpu.SetFlag(flag_C, (val & 0x80));
	val <<= 1;
	val |= C;
	cpu.SetZN( val );
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_ROR(u8 val)
{
	u8 C = cpu.GetFlag(flag_C);
	cpu.SetFlag(flag_C, (val & 0x1));
	val >>= 1;
	val |= C<<7;
	cpu.SetZN(val);
	return val;
}
//-------------------------------------------------------------------------------------------------
inline u8 op_RTI(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_RTS(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_SBC(u8 val)
{
	return op_ADC(~val);
}
//-------------------------------------------------------------------------------------------------
inline u8 op_SEC(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_SED(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_SEI(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_STA(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_STX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_STY(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TAX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TAY(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TSX(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TXA(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TXS(u8 val)
{

}
//-------------------------------------------------------------------------------------------------
inline u8 op_TYA(u8 val)
{

}

//=================================================================================================
